<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, height=device-height, initial-scale=1.0"
    />
    <title>Minerals shop</title>
  </head>
  <body>
    <!-- Search and controls -->
    <header class="b-header container mb-3 mt-5">
      <div class="row justify-content-between">
        <form class="d-flex justify-content-between">
          <input
            name="search"
            class="form-control form-control-lg mr-3"
            placeholder="Enter product name.."
          />
          <button type="submit" class="btn btn-success btn-lg px-5">
            Search
          </button>
        </form>
        <div>
          <button type="button" class="btn btn-primary btn-lg px-5">
            Add new
          </button>
        </div>
      </div>
    </header>

    <main class="b-block container">
      <!-- Products -->
      <table class="table js-table"></table>
    </main>

    <!-- Modals -->
    <div class="b-modals js-modal-container" style="display: none">
      <!-- Confirm deletion -->
      <div id="confirm" class="b-modal">
        <h2>Are you sure?</h2>
        <p>Are you sure you want to delete <em>Antarcticite</em>?</p>
        <div>
          <button type="button">Yes</button>
          <button type="button">No</button>
        </div>
      </div>
    </div>

    <!-- Product form -->
    <script type="text/template" id="form-template">
      <div id="product-form" class="b-modal shadow rounded px-4 py-3">
        <h2 class="mb-3"><%- name %></h2>
        <form class="js-form">
          <div class="form-group">
            <label for="product-name">Name*:</label>
            <input
              name="name"
              type="text"
              id="product-name"
              class="form-control js-focus-target"
              value=<%- name %>
            />
          </div>
          <div class="form-group">
            <label for="product-email">Supplier mail*:</label>
            <input
              name="email"
              type="text"
              id="product-email"
              class="form-control"
              value=<%- email %>
            />
          </div>
          <div class="form-row">
            <div class="col form-group">
              <label for="product-amount">Count*:</label>
              <input
                name="amount"
                type="text"
                id="product-amount"
                class="form-control"
                value=<%- amount %>
              />
            </div>
            <div class="col form-group">
              <label for="product-price">Price*:</label>
              <input
                name="price"
                type="text"
                id="product-price"
                class="form-control"
                value=<%- price %>
              />
            </div>
          </div>
          <h4>Delivery:</h4>
          <div class="form-row js-delivery">
          </div>
          <div class="d-flex mt-2">
            <button type="submit" class="js-submit btn btn-success mr-2">Save changes</button>
            <button type="cancel" class="js-cancel btn btn-secondary">Cancel</button>
          </div>
        </form>
      </div>
    </script>

    <!-- Delivery -->
    <script type="text/template" id="delivery-template">
      <div class="col form-group custom-control">
        <select name="country" class="custom-select">
          <% countries.forEach(c => { %>
            <option value=<%= c.key %> <%- c.isSelected ? 'selected' : '' %> >
              <%- c.value %>
            </option>
          <% }) %>
        </select>
      </div>
      <div class="col form-group">
        <div class="border p-2 rounded">
          <div class="custom-control custom-checkbox">
            <input
              name="cities"
              value="selectall"
              id="cities-selectall"
              type="checkbox"
              class="custom-control-input js-selectall"
            />
            <label for="cities-selectall" class="custom-control-label">Select all</label>
          </div>
          <hr />
          <% cities.forEach(city => { %>
            <div class="custom-control custom-checkbox">
              <input
                name="cities"
                value=<%- city.key %>
                id="cities-<%- city.key %>"
                type="checkbox"
                class="custom-control-input js-city"
              />
              <label for="cities-<%- city.key %>" class="custom-control-label">
                <%- city.value %>
              </label>
            </div>
          <% }) %>
        </div>
      </div>
    </script>

    <!-- Products list -->
    <script type="text/template" id="table-template">
      <thead>
        <tr>
          <th class="w-50" scope="col">Name</th>
          <th scope="col">Price</th>
          <th scope="col" class="text-right">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% items.forEach(function(item) { %>
          <tr class="js-product" data-id="<%- item.id %>">
            <td class="align-middle">
              <div class="row justify-content-between no-gutters">
                <a href="#" class="js-details"><%- item.name %></a>
                <span class="badge badge-pill badge-secondary px-3 py-2">
                  <%- item.amount %>
                </span>
              </div>
            </td>
            <td class="align-middle">
              <div class="row justify-content-between no-gutters">
                &dollar;<%- item.price %>
              </div>
            </td>
            <td class="align-middle">
              <div class="row justify-content-end no-gutters">
                <button type="button" class="js-edit btn btn-warning mr-1">Edit</button>
                <button type="button" class="js-remove btn btn-danger">Delete</button>
              </div>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </script>
  </body>
</html>
